{% extends 'base.html' %}

{% block title %} Humano | My Contacts {% endblock %}

{% block content %}

  {% if "user_id" in session %}
    <h2>My Contacts:</h2>

    <ul>
      {% for contact in contacts %}
        <li>
          Contact Name: {{ contact.contact_name }}<br>
          Number: {{ contact.contact_phone_number}}<br>
          Relationship: {{ contact.relationship }}<br>
          <form>
            <input 
              id="edit-contact" 
              type="button" 
              value="Edit" 
              onclick="window.location.href='/my-contacts/edit-{{ contact.contact_id }}'"/>
          </form><br>
<!--           <form>
            <button 
              id="{# contact.contact_id #}"
              type="button">Delete
            </button>
          </form> -->
          <form
            method="post"
            action="/my-contacts/delete-{{ contact.contact_id }}">
            <button 
              type="submit">Delete
            </button>
          </form>
        </li><br>
      {% endfor %}
    </ul>
  {% endif %}

  <a 
    href="/add-contact">Add contact
  </a>

  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="text-align:center;">
          <h4 class="modal-title" style="color:red;" id="deleteModalLabel">Are you sure you want to delete this contact?
          </h4>
        </div>
       
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="Delete()">Delete</button>
        </div>
      </div>
    </div>
  </div>

<!--   <script type="text/javascript">

    let deleteButton = document.querySelector("{# contact.contact_id #}");

    deleteButton.addEventListener('click', function (evt) {
     $("#deleteModal").modal();
    }

    function Delete(){
      $.ajax({
        url : "/my-contacts/delete-{# contact.contact_id #}",
        data : {id:localStorage.getItem('deleteId')},
        type : 'POST',
        success: function(res){
          var result = JSON.parse(res);
          if(result.status == 'OK'){
            $('#deleteModal').modal('hide');
            GetBlogs();
          }
          else{
            alert(result.status); 
          }
        },
        error: function(error){
          console.log(error);
        }
      });
    }
  </script> -->


{% endblock %}